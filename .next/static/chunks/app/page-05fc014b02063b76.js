(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4432:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});var s=l(5155),a=l(2115),o=l(5380),i=l(63);function n(e){let{children:t}=e,{user:l,isLoading:n}=(0,o.A)(),r=(0,i.useRouter)();return((0,a.useEffect)(()=>{n||l||r.push("/login")},[l,n,r]),n)?(0,s.jsxs)("div",{className:"loading-container",children:[(0,s.jsx)("div",{className:"loading-spinner"}),(0,s.jsx)("p",{children:"Loading..."})]}):l?(0,s.jsx)(s.Fragment,{children:t}):null}},4518:(e,t,l)=>{Promise.resolve().then(l.bind(l,8244))},5380:(e,t,l)=>{"use strict";l.d(t,{A:()=>n,AuthProvider:()=>i});var s=l(5155),a=l(2115);let o=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[l,i]=(0,a.useState)(null),[n,r]=(0,a.useState)(!0),[d,c]=(0,a.useState)(!1);(0,a.useEffect)(()=>{c(!0);{let e=localStorage.getItem("user");if(e)try{i(JSON.parse(e))}catch(e){console.error("Failed to parse saved user:",e),localStorage.removeItem("user")}}r(!1)},[]);let u=async(e,t)=>{if(console.log("AuthContext login called with:",{email:e,password:t}),"admin@example.com"===e&&"password"===t){let t={id:"1",email:e,name:"Admin User"};return i(t),localStorage.setItem("user",JSON.stringify(t)),console.log("Login successful, user set:",t),!0}return console.log("Login failed - invalid credentials"),!1};return(0,s.jsx)(o.Provider,{value:{user:l,login:u,logout:()=>{i(null),localStorage.removeItem("user")},isLoading:n},children:t})}function n(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8244:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>F});var s=l(5155),a=l(2115),o=l(5125),i=l(2619),n=l.n(i),r=l(6917),d=l(9448),c=l(1151),u=l(6707),m=l(4864),h=l(8700),p=l(4058),x=l(8172),g=l(3854),j=l(5825),A=l(4963),y=l(6140),N=l(6653),b=l(8795),v=l(2995),f=l(9776),S=l(2454),k=l(549),C=l(5380);l(8378);let w=e=>{let{toggleTheme:t,currentTheme:l}=e,{user:i,logout:w}=(0,C.A)(),[T,F]=(0,a.useState)(1),[E,P]=(0,a.useState)(""),[I,L]=(0,a.useState)("all"),[D,O]=(0,a.useState)(!1),[_,z]=(0,a.useState)(!1),[J,R]=(0,a.useState)(!1),[q,G]=(0,a.useState)(null),[M,Q]=(0,a.useState)(null),[U,V]=(0,a.useState)(!1),[K,B]=(0,a.useState)(""),[W,H]=(0,a.useState)(""),[X]=r.A.useForm(),[Y]=r.A.useForm(),Z=(0,f.jE)(),$="https://jsonplaceholder.typicode.com/todos",ee=(e,t)=>{B(e),H(t),V(!0)},{data:et,isLoading:el,error:es}=(0,S.I)({queryKey:["todos"],queryFn:async()=>(await o.A.get($)).data}),ea=null!=et?et:[],eo=(0,k.n)({mutationFn:async e=>{let t=await o.A.post($,{title:e.title,completed:!1,userId:1}),l=ea.length>0?Math.max(...ea.map(e=>e.id)):200;return{...t.data,id:l+1}},onSuccess:(e,t)=>{Z.setQueryData(["todos"],t=>[e,...t||[]]),O(!1),X.resetFields(),ee("Todo Added Successfully!",'"'.concat(t.title,'" has been added. (Note: JSONPlaceholder simulates this; data is not persistent)'))},onError:e=>{d.Ay.error({message:"Add Todo Failed",description:e.message||"Could not add todo.",placement:"topRight"})}}),ei=(0,k.n)({mutationFn:async e=>{if(!q)throw Error("No todo being edited");let t={id:q.id,title:e.title,completed:e.completed,userId:q.userId};return await o.A.put("".concat($,"/").concat(q.id),t),t},onSuccess:e=>{Z.setQueryData(["todos"],t=>(t||[]).map(t=>t.id===(null==q?void 0:q.id)?e:t)),z(!1),G(null),ee("Todo Updated Successfully!",'"'.concat(e.title,'" has been updated. (Note: JSONPlaceholder simulates this; data is not persistent)'))},onError:e=>{d.Ay.error({message:"Update Todo Failed",description:e.message||"Could not update todo.",placement:"topRight"})}}),en=(0,k.n)({mutationFn:async e=>(await o.A.delete("".concat($,"/").concat(e)),e),onSuccess:e=>{Z.setQueryData(["todos"],t=>(t||[]).filter(t=>t.id!==e)),R(!1),Q(null),ee("Todo Deleted Successfully!","The todo has been removed. (Note: JSONPlaceholder simulates this; data is not persistent)")},onError:e=>{d.Ay.error({message:"Delete Todo Failed",description:e.message||"Could not delete todo.",placement:"topRight"})}}),er=(0,a.useMemo)(()=>{let e=ea;return"completed"===I?e=e.filter(e=>e.completed):"pending"===I&&(e=e.filter(e=>!e.completed)),E&&(e=e.filter(e=>e.title.toLowerCase().includes(E.toLowerCase()))),e},[ea,I,E]),ed=10*T,ec=er.slice(ed-10,ed),eu=Math.ceil(er.length/10);a.useEffect(()=>{F(1)},[E,I]);let em=e=>F(e);return el?(0,s.jsx)("div",{className:"todo-list-container",role:"status","aria-live":"polite",children:(0,s.jsx)("div",{className:"todo-list-wrapper",children:(0,s.jsxs)("div",{className:"loading-state-container",children:[(0,s.jsx)("div",{className:"loading-spinner"}),(0,s.jsx)("p",{className:"loading-text",children:"Loading todos, please wait..."})]})})}):es?(0,s.jsx)("div",{className:"todo-list-container",role:"alert","aria-live":"assertive",children:(0,s.jsxs)("div",{className:"todo-list-wrapper",children:[(0,s.jsxs)("p",{className:"error-message",children:["Error: ",es.message]}),(0,s.jsx)("p",{className:"error-message",children:"Please check your network connection or try again later."})]})}):(0,s.jsxs)("main",{className:"todo-list-container",children:[(0,s.jsxs)("div",{className:"todo-list-wrapper",children:[(0,s.jsxs)("header",{className:"todo-list-header",children:[(0,s.jsxs)("div",{className:"header-title-section",children:[(0,s.jsx)("h2",{children:"GetMyTasks"}),i&&(0,s.jsxs)("div",{className:"user-info",children:[(0,s.jsxs)("span",{children:["Welcome, ",i.name]}),(0,s.jsx)(c.Ay,{icon:(0,s.jsx)(x.A,{}),onClick:w,className:"logout-button",size:"small",type:"text",children:"Logout"})]})]}),(0,s.jsxs)("div",{className:"header-controls",children:[(0,s.jsxs)("div",{className:"search-row",children:[(0,s.jsx)("label",{htmlFor:"search-todo",className:"visually-hidden",children:"Search Todos"}),(0,s.jsx)(u.A,{id:"search-todo",className:"search-input",placeholder:"Q Search",value:E,onChange:e=>P(e.target.value),"aria-label":"Search todos by title"})]}),(0,s.jsxs)("div",{className:"buttons-row",children:[(0,s.jsx)(c.Ay,{type:"primary",icon:(0,s.jsx)(g.A,{}),onClick:()=>O(!0),className:"add-todo-button","aria-label":"Add new todo",children:"Add New Todo"}),(0,s.jsx)(m.A,{menu:{items:[{key:"all",label:"All"},{key:"completed",label:"Completed"},{key:"pending",label:"Pending"}],selectable:!0,onClick:e=>{let{key:t}=e;return L(t)},selectedKeys:[I]},trigger:["click"],placement:"bottomRight",children:(0,s.jsxs)(c.Ay,{className:"filter-dropdown-button","aria-label":"Filter todos",children:[(0,s.jsx)(j.A,{})," Filter"]})}),(0,s.jsxs)(c.Ay,{onClick:t,className:"theme-toggle-button","aria-label":"Switch to ".concat("light"===l?"dark":"light"," mode"),children:["light"===l?(0,s.jsx)(A.A,{}):(0,s.jsx)(y.A,{}),(0,s.jsxs)("span",{className:"visually-hidden",children:["Switch to ","light"===l?"dark":"light"," mode"]})]})]})]})]}),(0,s.jsx)("section",{className:"todo-items-grid","aria-live":"polite",children:0!==ec.length||el||es||!(ea.length>0)?ec.map(e=>(0,s.jsxs)("div",{className:"todo-item-card",children:[(0,s.jsxs)("div",{className:"todo-item-card-content",children:[(0,s.jsx)(h.A,{checked:e.completed,disabled:!0,"aria-label":"Todo ".concat(e.title," is ").concat(e.completed?"completed":"not completed")}),(0,s.jsx)("span",{className:"todo-item-title ".concat(e.completed?"completed-text":""),children:e.title})]}),(0,s.jsxs)("div",{className:"todo-card-footer",children:[(0,s.jsx)(c.Ay,{icon:(0,s.jsx)(N.A,{}),onClick:()=>{G(e),Y.setFieldsValue({title:e.title,completed:e.completed}),z(!0)},className:"action-button edit-button","aria-label":"Edit todo: ".concat(e.title),size:"small",children:"Edit"}),(0,s.jsx)(c.Ay,{icon:(0,s.jsx)(b.A,{}),onClick:()=>{Q(e.id),R(!0)},className:"action-button delete-button","aria-label":"Delete todo: ".concat(e.title),size:"small",children:"Delete"}),(0,s.jsx)(n(),{href:"/todos/".concat(e.id),className:"action-button view-button","aria-label":"View details for todo: ".concat(e.title),children:"View"})]})]},e.id)):(0,s.jsx)("p",{className:"no-todos-message",children:"No todos found matching your criteria."})}),(0,s.jsxs)("nav",{className:"pagination-controls","aria-label":"Pagination Navigation",children:[(0,s.jsx)("button",{className:"pagination-button",onClick:()=>em(T-1),disabled:1===T,"aria-label":"Go to previous page",children:"Previous"}),Array.from({length:eu},(e,t)=>(0,s.jsx)("button",{onClick:()=>em(t+1),className:"pagination-button ".concat(T===t+1?"active":""),"aria-label":"Go to page ".concat(t+1),children:t+1},t+1)),(0,s.jsx)("button",{className:"pagination-button",onClick:()=>em(T+1),disabled:T===eu||0===eu,"aria-label":"Go to next page",children:"Next"})]})]}),(0,s.jsx)(p.A,{title:"Add New Todo",open:D,onCancel:()=>{O(!1),X.resetFields()},footer:null,children:(0,s.jsxs)(r.A,{form:X,onFinish:e=>{eo.mutate(e)},layout:"vertical",initialValues:{completed:!1},children:[(0,s.jsx)(r.A.Item,{name:"title",label:"Todo Title",rules:[{required:!0,message:"Please input the todo title!"}],children:(0,s.jsx)(u.A,{placeholder:"e.g., Plan social media content"})}),(0,s.jsxs)(r.A.Item,{children:[(0,s.jsx)(c.Ay,{type:"primary",htmlType:"submit",className:"add-todo-modal-button",children:"Add Todo"}),(0,s.jsx)(c.Ay,{onClick:()=>{O(!1),X.resetFields()},style:{marginLeft:8},children:"Cancel"})]})]})}),(0,s.jsx)(p.A,{title:"Edit Todo",open:_,onCancel:()=>{z(!1),G(null),Y.resetFields()},footer:null,children:(0,s.jsxs)(r.A,{form:Y,onFinish:e=>{q&&ei.mutate(e)},layout:"vertical",children:[(0,s.jsx)(r.A.Item,{name:"title",label:"Todo Title",rules:[{required:!0,message:"Please input the todo title!"}],children:(0,s.jsx)(u.A,{placeholder:"e.g., Plan social media content"})}),(0,s.jsx)(r.A.Item,{name:"completed",valuePropName:"checked",children:(0,s.jsx)(h.A,{children:"Completed"})}),(0,s.jsxs)(r.A.Item,{children:[(0,s.jsx)(c.Ay,{type:"primary",htmlType:"submit",children:"Update Todo"}),(0,s.jsx)(c.Ay,{onClick:()=>{z(!1),G(null),Y.resetFields()},style:{marginLeft:8},children:"Cancel"})]})]})}),(0,s.jsx)(p.A,{title:"Confirm Delete",open:J,onOk:()=>{null!==M&&en.mutate(M)},onCancel:()=>{R(!1),Q(null)},okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0},children:(0,s.jsx)("p",{children:"Are you sure you want to delete this todo? This action cannot be undone."})}),(0,s.jsxs)(p.A,{open:U,title:K,onCancel:()=>V(!1),footer:[(0,s.jsx)(c.Ay,{type:"primary",onClick:()=>V(!1),children:"OK"},"ok")],centered:!0,children:[(0,s.jsx)("div",{style:{textAlign:"center",marginBottom:"20px"},children:(0,s.jsx)(v.A,{style:{fontSize:"48px",color:"#28a745"}})}),(0,s.jsx)("p",{style:{textAlign:"center",fontSize:"1.1em",color:"#333333"},children:W})]})]})};var T=l(4432);function F(){let[e,t]=a.useState("dark"),[l,o]=a.useState(!1);return(a.useEffect(()=>{o(!0),document.documentElement.setAttribute("data-theme",e)},[e]),l)?(0,s.jsx)(T.A,{children:(0,s.jsx)(w,{toggleTheme:()=>t(e=>"light"===e?"dark":"light"),currentTheme:e})}):(0,s.jsx)("div",{children:"Loading..."})}},8378:()=>{}},e=>{e.O(0,[355,619,743,287,72,80,441,255,358],()=>e(e.s=4518)),_N_E=e.O()}]);